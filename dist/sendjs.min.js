!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.sendjs=t()}(this,function(){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){var r;if(null!=e)if("object"!==(void 0===e?"undefined":i(e))&&(e=[e]),r=e,"[object Array]"===toString.call(r))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function a(){var r={};function e(e,t){"object"===i(r[t])&&"object"===(void 0===e?"undefined":i(e))?r[t]=a(r[t],e):r[t]=e}for(var t=0,n=arguments.length;t<n;t++)o(arguments[t],e);return r}function u(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l(e){for(var t,r=e.data,n=(t=r,Object.keys(t).sort(function(e,t){return e.split("=")[0]>t.split("=")[0]?1:-1})),o=[],a=0;a<n.length;a++)o.push(n[a]+"="+r[n[a]]);return o.join("&")+"&=requestKey"+e.requestKey}var s=function(e,t){return e<<t|e>>>32-t},f=function(e,t){var r,n,o,a,i;return o=2147483648&e,a=2147483648&t,i=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^i^o^a:r|n?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a},d=function(e,t,r,n,o,a,i){var u;return e=f(e,f(f((u=t)&r|~u&n,o),i)),f(s(e,a),t)},h=function(e,t,r,n,o,a,i){var u;return e=f(e,f(f(t&(u=n)|r&~u,o),i)),f(s(e,a),t)},p=function(e,t,r,n,o,a,i){return e=f(e,f(f(t^r^n,o),i)),f(s(e,a),t)},g=function(e,t,r,n,o,a,i){return e=f(e,f(f(r^(t|~n),o),i)),f(s(e,a),t)},v=function(e){for(var t,r=e.length,n=r+8,o=16*((n-n%64)/64+1),a=Array(o-1),i=0,u=0;u<r;)i=u%4*8,a[t=(u-u%4)/4]=a[t]|e.charCodeAt(u)<<i,u++;return i=u%4*8,a[t=(u-u%4)/4]=a[t]|128<<i,a[o-2]=r<<3,a[o-1]=r>>>29,a},y=function(e){var t,r="",n="";for(t=0;t<=3;t++)r+=(n="0"+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r},b=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t};function c(e){e.requestKey&&(e.data.sign=function(e){var t,r,n,o,a,i,u,l,s,c=Array();for(e=b(e),c=v(e),i=1732584193,u=4023233417,l=2562383102,s=271733878,t=0;t<c.length;t+=16)i=d(r=i,n=u,o=l,a=s,c[t+0],7,3614090360),s=d(s,i,u,l,c[t+1],12,3905402710),l=d(l,s,i,u,c[t+2],17,606105819),u=d(u,l,s,i,c[t+3],22,3250441966),i=d(i,u,l,s,c[t+4],7,4118548399),s=d(s,i,u,l,c[t+5],12,1200080426),l=d(l,s,i,u,c[t+6],17,2821735955),u=d(u,l,s,i,c[t+7],22,4249261313),i=d(i,u,l,s,c[t+8],7,1770035416),s=d(s,i,u,l,c[t+9],12,2336552879),l=d(l,s,i,u,c[t+10],17,4294925233),u=d(u,l,s,i,c[t+11],22,2304563134),i=d(i,u,l,s,c[t+12],7,1804603682),s=d(s,i,u,l,c[t+13],12,4254626195),l=d(l,s,i,u,c[t+14],17,2792965006),u=d(u,l,s,i,c[t+15],22,1236535329),i=h(i,u,l,s,c[t+1],5,4129170786),s=h(s,i,u,l,c[t+6],9,3225465664),l=h(l,s,i,u,c[t+11],14,643717713),u=h(u,l,s,i,c[t+0],20,3921069994),i=h(i,u,l,s,c[t+5],5,3593408605),s=h(s,i,u,l,c[t+10],9,38016083),l=h(l,s,i,u,c[t+15],14,3634488961),u=h(u,l,s,i,c[t+4],20,3889429448),i=h(i,u,l,s,c[t+9],5,568446438),s=h(s,i,u,l,c[t+14],9,3275163606),l=h(l,s,i,u,c[t+3],14,4107603335),u=h(u,l,s,i,c[t+8],20,1163531501),i=h(i,u,l,s,c[t+13],5,2850285829),s=h(s,i,u,l,c[t+2],9,4243563512),l=h(l,s,i,u,c[t+7],14,1735328473),u=h(u,l,s,i,c[t+12],20,2368359562),i=p(i,u,l,s,c[t+5],4,4294588738),s=p(s,i,u,l,c[t+8],11,2272392833),l=p(l,s,i,u,c[t+11],16,1839030562),u=p(u,l,s,i,c[t+14],23,4259657740),i=p(i,u,l,s,c[t+1],4,2763975236),s=p(s,i,u,l,c[t+4],11,1272893353),l=p(l,s,i,u,c[t+7],16,4139469664),u=p(u,l,s,i,c[t+10],23,3200236656),i=p(i,u,l,s,c[t+13],4,681279174),s=p(s,i,u,l,c[t+0],11,3936430074),l=p(l,s,i,u,c[t+3],16,3572445317),u=p(u,l,s,i,c[t+6],23,76029189),i=p(i,u,l,s,c[t+9],4,3654602809),s=p(s,i,u,l,c[t+12],11,3873151461),l=p(l,s,i,u,c[t+15],16,530742520),u=p(u,l,s,i,c[t+2],23,3299628645),i=g(i,u,l,s,c[t+0],6,4096336452),s=g(s,i,u,l,c[t+7],10,1126891415),l=g(l,s,i,u,c[t+14],15,2878612391),u=g(u,l,s,i,c[t+5],21,4237533241),i=g(i,u,l,s,c[t+12],6,1700485571),s=g(s,i,u,l,c[t+3],10,2399980690),l=g(l,s,i,u,c[t+10],15,4293915773),u=g(u,l,s,i,c[t+1],21,2240044497),i=g(i,u,l,s,c[t+8],6,1873313359),s=g(s,i,u,l,c[t+15],10,4264355552),l=g(l,s,i,u,c[t+6],15,2734768916),u=g(u,l,s,i,c[t+13],21,1309151649),i=g(i,u,l,s,c[t+4],6,4149444226),s=g(s,i,u,l,c[t+11],10,3174756917),l=g(l,s,i,u,c[t+2],15,718787259),u=g(u,l,s,i,c[t+9],21,3951481745),i=f(i,r),u=f(u,n),l=f(l,o),s=f(s,a);return(y(i)+y(u)+y(l)+y(s)).toLowerCase()}(l(e)));var t,r=e.data,n=[];for(var o in r)r.hasOwnProperty(o)&&(null!=r[o]&&null!=r[o]||(t=o+" value is reqs[variable]",console.warn(t||"log warn ~!")),n.push(u(o)+"="+u(r[o])));return n.join("&")}function t(n){return new Promise(function(t,e){var r=new XMLHttpRequest;r.open(n.type,n.baseUrl="GET"===n.type?""+n.baseUrl+n.data:n.baseUrl,n.async),r.onreadystatechange=function(){var e;4===r.readyState&&200===r.status&&t((e=r.responseText,JSON.parse(e)))},r.onerror=function(){e(r)},r.setRequestHeader(Object.keys(n.header).join(""),Object.values(n.header).join("")),"GET"===n.type?r.send(null):r.send(n.data)})}var r=0;function n(e){var t;return this instanceof n||(t="Command is a constructor and should be called with the `new` keyword",console.error(t||"log error ~!")),this.$id=r++,this._init(e)}n.prototype._init=function(e){return t({baseUrl:e.baseUrl,type:e.type.toUpperCase(),async:e.async,header:e.header,success:e.success,error:e.error,data:c(e)})};var m={data:{},type:"get",async:!0,baseUrl:"",header:{"Content-type":"application/x-www-form-urlencoded; charset=utf-8"},requestKey:""};function C(e,t){var r,n=e;return t&&(r=t,"[object String]"===toString.call(r))&&(n+=t),n+=-1===n.indexOf("?")?"?":"&"}function j(e){return a(e.config,{type:"post",data:e.data,baseUrl:C(e.baseUrl,e.url)})}var e={};return e.defaults=m,e.create=function(e){this.defaults=a(m,e)},e.ajax=function(e){return new n(a(this.defaults,e))},e.post=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.ajax(j({baseUrl:this.defaults.baseUrl,url:e,data:t,config:r}))},e.get=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this.ajax(j({baseUrl:this.defaults.baseUrl,url:e,data:t,config:r}))},e.downClient=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=a(this.defaults,j({baseUrl:this.defaults.baseUrl,url:e,data:t,config:r}));window.open(""+n.baseUrl+c(n))},e.upClient=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.post(e,t,r)},e});
